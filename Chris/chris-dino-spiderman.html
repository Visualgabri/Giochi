<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Christopher - Super Gioco</title>
    <style>
        :root {
            --spider-red: #e74c3c;
            --spider-blue: #2980b9;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden;
            background: radial-gradient(circle, #2c3e50, #000);
            font-family: 'Arial Rounded MT Bold', sans-serif;
            touch-action: none; /* Impedisce lo zoom e lo scroll */
            user-select: none;
        }

        #game-canvas {
            width: 100vw; height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .item {
            position: absolute;
            font-size: 100px; /* Grandi per dita piccole */
            cursor: pointer;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.5));
            transition: transform 0.1s;
            z-index: 2;
        }

        /* Effetto ragnatela quando si tocca */
        .web-shot {
            position: absolute;
            width: 20px; height: 20px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            box-shadow: 0 0 20px 5px white;
            animation: web-shoot 0.4s ease-out forwards;
        }

        @keyframes web-shoot {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(10); opacity: 0; }
        }

        /* Titolo dinamico */
        .ui {
            position: absolute;
            top: 10px; width: 100%;
            text-align: center;
            color: white;
            font-size: 24px;
            text-shadow: 0 0 10px var(--spider-red);
            pointer-events: none;
            z-index: 10;
        }

        /* Schermata iniziale */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--spider-red);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 100; color: white;
            text-align: center;
        }

        .start-btn {
            background: var(--spider-blue);
            border: 5px solid white;
            color: white;
            padding: 30px 60px;
            font-size: 40px;
            border-radius: 100px;
            margin-top: 20px;
            box-shadow: 0 10px 0 #1a5276;
        }

        .start-btn:active { transform: translateY(10px); box-shadow: none; }
    </style>
</head>
<body>

    <div id="start-screen">
        <h1>CIAO CHRISTOPHER!</h1>
        <div style="font-size: 80px;">üï∑Ô∏èü¶ñüêØüî´</div>
        <button class="start-btn" onclick="start()">GIOCA!</button>
    </div>

    <div class="ui">TOCCA TUTTO! üï∑Ô∏èüï∏Ô∏è</div>
    <div id="game-canvas"></div>

<script>
    const canvas = document.getElementById('game-canvas');
    const emojis = ['üï∑Ô∏è', 'ü¶ñ', 'üêØ', 'üî´', 'üï∏Ô∏è', 'ü¶ï', '‚ö°'];
    let audioCtx = null;

    // Inizializza l'audio dopo il primo tocco (regola dei browser)
    function initAudio() {
        if (!audioCtx) {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }
    }

    // Funzione per creare suoni buffi sintetizzati
    function playSound(type) {
        if(!audioCtx) return;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);

        const now = audioCtx.currentTime;

        if (type === 'web') { // Suono sparo ragnatela
            osc.type = 'triangle';
            osc.frequency.setValueAtTime(150, now);
            osc.frequency.exponentialRampToValueAtTime(1000, now + 0.1);
            gain.gain.setValueAtTime(0.3, now);
            gain.gain.linearRampToValueAtTime(0, now + 0.1);
        } else if (type === 'pop') { // Suono dinosauro/tigre
            osc.type = 'sine';
            osc.frequency.setValueAtTime(400, now);
            osc.frequency.exponentialRampToValueAtTime(100, now + 0.2);
            gain.gain.setValueAtTime(0.5, now);
            gain.gain.linearRampToValueAtTime(0, now + 0.2);
        } else if (type === 'laser') { // Suono pistola
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(800, now);
            osc.frequency.linearRampToValueAtTime(200, now + 0.15);
            gain.gain.setValueAtTime(0.2, now);
            gain.gain.linearRampToValueAtTime(0, now + 0.15);
        }

        osc.start();
        osc.stop(now + 0.2);
    }

    function createItem() {
        const item = document.createElement('div');
        item.className = 'item';
        const char = emojis[Math.floor(Math.random() * emojis.length)];
        item.innerHTML = char;
        
        // Posizione casuale
        const x = Math.random() * (window.innerWidth - 120);
        const y = Math.random() * (window.innerHeight - 150) + 50;
        
        item.style.left = x + 'px';
        item.style.top = y + 'px';
        
        // Velocit√† casuale per il galleggiamento
        let dx = (Math.random() - 0.5) * 4;
        let dy = (Math.random() - 0.5) * 4;

        function move() {
            let left = parseFloat(item.style.left);
            let top = parseFloat(item.style.top);

            if (left < 0 || left > window.innerWidth - 100) dx *= -1;
            if (top < 50 || top > window.innerHeight - 100) dy *= -1;

            item.style.left = (left + dx) + 'px';
            item.style.top = (top + dy) + 'px';
            item.aniFrame = requestAnimationFrame(move);
        }
        move();

        // Interazione
        const interact = (e) => {
            e.preventDefault();
            const rect = item.getBoundingClientRect();
            createWebEffect(rect.left + 50, rect.top + 50);
            
            // Reazione al tocco
            item.style.transform = "scale(2) rotate(20deg)";
            
            if (char === 'üï∑Ô∏è' || char === 'üï∏Ô∏è') playSound('web');
            else if (char === 'üî´') playSound('laser');
            else playSound('pop');

            setTimeout(() => {
                item.style.transform = "scale(1) rotate(0deg)";
                item.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
            }, 200);
        };

        item.addEventListener('touchstart', interact);
        item.addEventListener('mousedown', interact);

        canvas.appendChild(item);
    }

    function createWebEffect(x, y) {
        const web = document.createElement('div');
        web.className = 'web-shot';
        web.style.left = x + 'px';
        web.style.top = y + 'px';
        canvas.appendChild(web);
        setTimeout(() => web.remove(), 400);
    }

    // Tocco dello sfondo (Spara ragnatela ovunque)
    canvas.addEventListener('touchstart', (e) => {
        if(e.target === canvas) {
            initAudio();
            const touch = e.touches[0];
            createWebEffect(touch.clientX, touch.clientY);
            playSound('web');
        }
    });

    function start() {
        initAudio();
        document.getElementById('start-screen').style.display = 'none';
        for(let i=0; i<8; i++) {
            setTimeout(createItem, i * 200);
        }
    }

    // Impedisce menu contestuale su tablet (pressione lunga)
    window.oncontextmenu = function(event) {
        event.preventDefault();
        event.stopPropagation();
        return false;
    };
</script>
</body>
</html>